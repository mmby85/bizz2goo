{% extends "blog/base.html" %}
{% load static %}

{% block title %} GOZONE - Business Development & Management {% endblock %} {# Updated title #}

{% block body %}

<style>
    /* Global or Base Styles (Consider moving to a main CSS file) */
    .partner-section {
        background: #f8f9fa; padding: 80px 0; overflow: hidden;
    }
    .partner-grid {
        display: flex; flex-wrap: wrap; justify-content: center; gap: 2rem; padding: 0 1rem;
    }
    .partner-item {
        flex: 0 1 180px; margin: 1rem; padding: 1rem; transition: all 0.3s ease;
    }
    .logo-container {
        width: 100%; padding-bottom: 60%; position: relative; background: white;
        border-radius: 8px; overflow: hidden;
    }
    .partner-logo {
        position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
        max-width: 95%; max-height: 95%; object-fit: contain; filter: grayscale(100%);
        transition: all 0.3s ease;
    }
    .partner-item:hover .partner-logo {
        filter: grayscale(0%); transform: translate(-50%, -50%) scale(1.05);
    }
    @media (max-width: 768px) { .partner-item { flex-basis: 140px; } }

    /* Styles for MAIN home page bottom ad section */
    .bottom-ad-section { /* For bottom_home_ad */
        margin-top: 40px;
        padding: 20px 0;
        text-align: center;
        background-color: #f8f9fa; /* Optional: background color */
    }
    .bottom-ad-section img {
        max-width: 85%; /* Responsive image */
        height: auto;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .bottom-ad-section a {
        display: inline-block;
    }

    /* Styles for the category-specific ad that might be loaded via articlesTabV2htmx.html */
    .bottom-ad-section-category { /* For bottom_category_ad from the include */
        margin-top: 3rem;
        padding: 20px 0;
        text-align: center;
        /* background-color: #e9ecef; /* Slightly different bg if needed */
    }
    .bottom-ad-section-category img {
        max-width: 85%; /* Or different styling as needed */
        height: auto;
        border-radius: 8px;
        box-shadow: 0 4px 8px rgba(0,0,0,0.15);
    }
    .bottom-ad-section-category a {
        display: inline-block;
    }

    /* Author Section Styles (Copied from previous version) */
    .authors-section {
        padding: 4rem 0;
        background-size: cover;
        background-position: center;
        position: relative;
        margin-top: 8px;
    }
    .authors-section .section-title { /* Scoped to authors-section */
        font-size: 2.5rem;
        color: #fff;
        font-weight: 600;
        text-transform: uppercase;
        letter-spacing: 2px;
        text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
    }
    .author-card {
        position: relative;
        height: 100%;
        width: 90%; /* As per your previous request */
        margin-left: auto; /* Center the card if width is less than column */
        margin-right: auto; /* Center the card */
        transition: transform 0.3s ease;
        margin-bottom: 0;
    }
    .card-inner {
        background: rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(10px);
        border-radius: 15px;
        overflow: hidden;
        box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        transition: all 0.3s ease;
        display: flex; /* Added to help structure */
        flex-direction: column; /* Stack image and info */
        height: 100%; /* Ensure inner card takes full height of author-card */
    }
    .author-card:hover .card-inner {
        transform: translateY(-10px);
        box-shadow: 0 15px 45px rgba(0, 0, 0, 0.3);
    }
    .author-image {
        position: relative;
        height: 200px;
        overflow: hidden;
        flex-shrink: 0; /* Prevent image from shrinking */
    }
    .author-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.3s ease;
    }
    .author-card:hover .author-image img {
        transform: scale(1.05);
    }
    .social-links {
        position: absolute;
        bottom: 20px;
        left: 50%;
        transform: translateX(-50%);
        display: flex;
        gap: 12px;
        opacity: 0;
        transition: opacity 0.3s ease;
    }
    .author-card:hover .social-links {
        opacity: 1;
    }
    .social-icon {
        width: 30px;
        height: 30px;
        border-radius: 50%;
        background: rgba(255, 255, 255, 0.9);
        display: flex;
        align-items: center;
        justify-content: center;
        color: #333;
        transition: all 0.3s ease;
    }
    .social-icon:hover {
        background: #fff;
        transform: translateY(-3px);
    }
    .author-info {
        padding: 1.2rem;
        text-align: center;
        flex-grow: 1; /* Allow info to take remaining space */
        display: flex; /* For vertical alignment of content */
        flex-direction: column; /* Stack name, role, link */
        justify-content: center; /* Center content vertically if space allows */
    }
    .author-name {
        color: #fff;
        font-size: 1.5rem; /* Was 1.1rem, then 1.5rem in your provided code */
        margin-bottom: 0.5rem;
        font-weight: 600;
    }
    .author-role {
        color: rgba(255, 255, 255, 0.9);
        font-size: 1rem; /* Was 0.75rem, then 1 in your provided code */
        margin-bottom: 1rem;
        flex-grow: 1; /* Allow role to push link down if text is short */
    }
    .profile-link {
        color: #fff;
        text-decoration: none;
        font-weight: 500;
        display: inline-flex;
        align-items: center;
        gap: 6px;
        transition: color 0.3s ease;
        margin-top: auto; /* Push link to bottom of info box */
    }
    .profile-link:hover {
        color: #00c9ff;
    }
    @media (max-width: 768px) {
        .author-image { height: 170px; }
        .authors-section .section-title { font-size: 2rem; }
    }
</style>

<div class=""> {# This div might be for overall page padding or structure #}
    {# This is where the dynamic content including posts and sidebar will be loaded/updated #}
    {# The id="content-container" is inside articlesTabV2htmx.html and is the target for HTMX swaps #}
    {% include "blog/articlesTabV2htmx.html" with ckposts=ckposts category=category sidebar_ads=sidebar_ads top_posts=top_posts categories=categories media_url=media_url bottom_category_ad=bottom_category_ad %}
</div>

<div class="main main-raised">

   <!-- Section Nos Rédacteurs -->
<div class="authors-section" style="background-image: linear-gradient(rgba(0,0,0,0.7), rgba(0,0,0,0.7)), url({% static 'blog/assets/img/8E8A7AB4-8683-4F89-9F3D-58D26B397FE5.png' %});">
    <div class="container">
        <h2 class="section-title text-center mb-5">Nos Rédacteurs</h2>
        <div class="row g-4 justify-content-center">
            {% for author in top_authors %}
            <div class="col-12 col-sm-6 col-md-4 col-lg-3 d-flex align-items-stretch mb-2"> {# Added d-flex and align-items-stretch #}
                <div class="author-card">
                    <div class="card-inner">
                        <div class="author-image">
                            <img src="{% if author.profile_picture %}{{ author.profile_picture.url }}{% else %}{% static 'blog/assets/img/default-avatar.png' %}{% endif %}"
                                 alt="{{ author.user.username }}"
                                 class="img-fluid">
                            <div class="social-links">
                                {% if author.twitter %}
                                <a href="{{ author.twitter }}" target="_blank" class="social-icon">
                                    <i class="fab fa-twitter"></i>
                                </a>
                                {% endif %}
                                {% if author.facebook %}
                                <a href="{{ author.facebook }}" target="_blank" class="social-icon">
                                    <i class="fab fa-facebook-f"></i>
                                </a>
                                {% endif %}
                                {% if author.gmail %}
                                <a href="mailto:{{ author.gmail }}" class="social-icon">
                                    <i class="fas fa-envelope"></i>
                                </a>
                                {% endif %}
                            </div>
                        </div>
                        <div class="author-info">
                            <h3 class="author-name">{{ author.user.get_full_name|default:author.user.username }}</h3>
                            <p class="author-role">{{ author.metier }}</p>
                            <a href="{% url 'author_profile' author.user.username %}" class="profile-link">
                                Voir le profil <i class="fas fa-arrow-right"></i>
                            </a>
                        </div>
                    </div>
                </div>
            </div>
            {% endfor %}
        </div>
    </div>
</div>

    <!-- Partners Section -->
    <section class="partner-section">
        <div class="container">
            <h2 class="text-center mb-5" style="font-family: Roboto ;font-size: 3rem; margin-bottom: 32px; font-weight: 600; color: #3c4858;">
                NOS PARTENAIRES
            </h2>
            <div class="partner-grid">
                <!-- Partner 1 -->
                <div class="partner-item">
                    <a href="https://www.facebook.com/Projecto.tn/" target="_blank" class="d-block">
                        <div class="logo-container">
                            <img src="{% static 'blog/assets/img/Logo projecto.png' %}" alt="Projecto.tn" class="partner-logo">
                        </div>
                    </a>
                </div>
                <!-- Partner 2 -->
                <div class="partner-item">
                    <a href="https://www.facebook.com/GeecEvent/" target="_blank" class="d-block">
                        <div class="logo-container">
                            <img src="{% static 'blog/assets/img/Logo GEEC.jpg' %}" alt="Geec Event" class="partner-logo">
                        </div>
                    </a>
                </div>
                <!-- Partner 3 -->
                <div class="partner-item">
                    <a href="https://curvesnsmiles.com/" target="_blank" class="d-block">
                        <div class="logo-container">
                            <img src="{% static 'blog/assets/img/image 6 (5).png' %}" alt="Curves n Smiles" class="partner-logo">
                        </div>
                    </a>
                </div>
                {# Add more partners as needed #}
            </div>
        </div>
    </section>

    <!-- Main Home Page Bottom Advertisement Section -->
    {% if bottom_home_ad %} {# This uses the variable bottom_home_ad directly from new_index context #}
    <section class="bottom-ad-section">
        <div class="container">
            {% with ad_url=bottom_home_ad.get_absolute_url %}
                {% if ad_url %}
                    <a href="{{ ad_url }}" {% if bottom_home_ad.link_type == 'external' %}target="_blank" rel="noopener noreferrer"{% endif %}>
                        <img src="{{ bottom_home_ad.image.url }}" alt="{{ bottom_home_ad.title }}">
                    </a>
                {% else %}
                    <img src="{{ bottom_home_ad.image.url }}" alt="{{ bottom_home_ad.title }}">
                {% endif %}
            {% endwith %}
        </div>
    </section>
    {% endif %}

    <div class="subscribe-line"> {# Assuming 'hidden' class controls visibility via JS/CSS #}
        <div class="container">
            <div class="row">
                <div class="col-md-6">
                    <h3 class="title" style="font-family: Roboto;">🚀 La Newsletter GOZONE</h3>
                    <p class="description">
                        Actus, conseils, outils : tout ce qu’il vous faut pour avancer dans le business, sans bruit inutile.
                        📩 Abonnez-vous à notre newsletter — on l’envoie seulement quand on a du vrai contenu à partager.
                    </p>
                </div>
                <div class="col-md-6">
                    <div class="card card-plain card-form-horizontal">
                        <div class="card-content">
                            <form method="POST" action=""> {# Add your newsletter form action #}
                                {% csrf_token %} {# If this is a Django form submission #}
                                <div class="row">
                                    <div class="col-md-8">
                                        <div class="input-group">
                                            <span class="input-group-addon"><i class="material-icons">mail</i></span>
                                            <input type="email" name="email" placeholder="Votre Email..." class="form-control" required />
                                        </div>
                                    </div>
                                    <div class="col-md-4">
                                        <button type="submit" class="btn btn-primary btn-round btn-block">S’abonner</button>
                                    </div>
                                </div>
                            </form>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}